#Maintainer sur <sergiusz.urbaniak@gmail.com>

pkgname=k8s-bin
_pkgname=kubernetes
pkgver=1.6.2
pkgrel=1
pkgdesc="Production-Grade Container Scheduling and Management"
arch=('x86_64')
url='https://github.com/kubernetes/kubernetes'
licence=('Apache')
provides=("k8s-bin=${pkgver}")
conflicts=('kubernetes')
makedepends=('cfssl')
source_x86_64=("https://dl.k8s.io/v${pkgver}/kubernetes-server-linux-amd64.tar.gz")
md5sums_x86_64=('6d52bed027ba4ae82aa07bd88013857a')

_PKGARCH=amd64

package() {
    install -Dm644 "../apiserver.service" "${pkgdir}/usr/lib/systemd/system/apiserver.service"
    install -Dm644 "../controller-manager.service" "${pkgdir}/usr/lib/systemd/system/controller-manager.service"
    install -Dm644 "../kubelet.service" "${pkgdir}/usr/lib/systemd/system/kubelet.service"
    install -Dm644 "../proxy.service" "${pkgdir}/usr/lib/systemd/system/proxy.service"
    install -Dm644 "../scheduler.service" "${pkgdir}/usr/lib/systemd/system/scheduler.service"

    cd $srcdir
    install -Dm755 "kubernetes/server/bin/kubefed" "${pkgdir}/usr/bin/kubefed"
    install -Dm755 "kubernetes/server/bin/hyperkube" "${pkgdir}/usr/bin/hyperkube"
}
